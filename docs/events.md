# Event Catalogue - CAPSIM 2.0

## Event Types Overview

–°–∏—Å—Ç–µ–º–∞ CAPSIM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π —Å 5 —É—Ä–æ–≤–Ω—è–º–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞. –°–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞, –ø—Ä–∏ —Ä–∞–≤–Ω—ã—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞—Ö - –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –º–µ—Ç–∫–∞–º.

## Event Priority Levels

| Priority | EventType | Category | Description |
|----------|-----------|----------|-------------|
| 1 | LAW | External | –ó–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) |
| 2 | WEATHER | External | –ü–æ–≥–æ–¥–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã –∏ –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è |
| 3 | TREND | Social | –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ —á–µ—Ä–µ–∑ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ |
| 4 | AGENT_ACTION | Agent | –î–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–æ–≤ (PublishPostAction, PurchaseAction, etc.) |
| 5 | SYSTEM | System | –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—ç–Ω–µ—Ä–≥–∏—è, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–±—Ä–æ—Å) |

## –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è Timestamp

### 1. –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–Ω—Ü–∏–ø
–í—Å–µ —Å–æ–±—ã—Ç–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç **simulation time** –≤ –º–∏–Ω—É—Ç–∞—Ö –æ—Ç –Ω–∞—á–∞–ª–∞ —Å–∏–º—É–ª—è—Ü–∏–∏:
- `timestamp = 0.0` - –Ω–∞—á–∞–ª–æ —Å–∏–º—É–ª—è—Ü–∏–∏
- `timestamp = 60.0` - 1 —á–∞—Å —Å–∏–º—É–ª—è—Ü–∏–∏  
- `timestamp = 1440.0` - 1 –¥–µ–Ω—å (24 —á–∞—Å–∞) —Å–∏–º—É–ª—è—Ü–∏–∏

### 2. –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã)
```python
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
EnergyRecoveryEvent(timestamp=current_time + 360.0)

# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Å–±—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—é–¥–∂–µ—Ç–æ–≤  
DailyResetEvent(timestamp=current_time + 1440.0)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
SaveDailyTrendEvent(timestamp=current_time + 1440.0)
```

### 3. –î–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–æ–≤ (—Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏)
```python
# Seed —Å–æ–±—ã—Ç–∏—è: —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –≤ –ø–µ—Ä–≤—ã–µ 60 –º–∏–Ω—É—Ç —Å jitter
base_time = (i * 60.0 / selected_agents_count)
jitter = random.uniform(-5.0, 5.0)  
timestamp = current_time + max(1.0, base_time + jitter)

# –û—Ç–≤–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: —Å–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 1-30 –º–∏–Ω—É—Ç
delay = random.uniform(1.0, 30.0)
timestamp = current_time + delay

# –í–ª–∏—è–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤: –∑–∞–¥–µ—Ä–∂–∫–∞ 10-60 –º–∏–Ω—É—Ç  
response_delay = random.uniform(10.0, 60.0)
timestamp = current_time + response_delay
```

### 4. –°–æ–±—ã—Ç–∏—è —Ç—Ä–µ–Ω–¥–æ–≤ (—Ü–µ–ø–æ—á–µ—á–Ω—ã–µ)
```python
# TrendInfluenceEvent –≤—Å–µ–≥–¥–∞ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ PublishPost
influence_timestamp = publish_timestamp + 5.0

# –ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
next_response = current_time + random.expovariate(1.0/15.0)  # Œª=15 –º–∏–Ω—É—Ç
```

### 5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**: 1.0 –º–∏–Ω—É—Ç–∞ (–¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å**: 5000 —Å–æ–±—ã—Ç–∏–π (graceful degradation)
- **–í—Ä–µ–º–µ–Ω–Ω–æ–π –±—é–¥–∂–µ—Ç**: –∞–≥–µ–Ω—Ç—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã 43 –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –≤ –¥–µ–Ω—å

## Detailed Event Specifications

### LAW Events (Priority 1)
**Category**: External  
**Description**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –≤—Å—é —Å–∏–º—É–ª—è—Ü–∏—é  
**Processing**: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –¥—Ä—É–≥–∏—Ö —Å–æ–±—ã—Ç–∏–π  
**Examples**: –ù–æ–≤—ã–µ —Ä–µ–≥—É–ª—è—Ü–∏–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞

### WEATHER Events (Priority 2)  
**Category**: External  
**Description**: –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞–≥–µ–Ω—Ç–æ–≤  
**Processing**: –ú–∞—Å—Å–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤  
**Examples**: –°–µ–∑–æ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

### TREND Events (Priority 3)
**Category**: Social  
**Description**: –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤ —á–µ—Ä–µ–∑ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏  
**Processing**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏, —Ä–∞—Å—á–µ—Ç –≤–ª–∏—è–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤  
**Components**:
- `TrendProcessor` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–µ–Ω–¥–æ–≤
- `PersonInfluence` - —Ä–∞—Å—á–µ—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –∞–≥–µ–Ω—Ç–æ–≤
- **Coverage Levels**: Low/Middle/High –ø–æ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ —Ç–µ–º—ã

### AGENT_ACTION Events (Priority 4)
**Category**: Agent  
**Description**: –î–µ–π—Å—Ç–≤–∏—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Å–∏–º—É–ª—è—Ü–∏–∏  

| Action | Time Cost | Energy Cost | Min Financial Level | Status |
|--------|-----------|-------------|-------------------|---------|
| **PublishPostAction** | 2 | 1.5 | ‚â•0.0 | ‚úÖ Active |
| **PurchaseLevel1Action** | 1 | 0.0 | ‚â•1.0 | üöß Future |
| **PurchaseLevel2Action** | 2 | 0.0 | ‚â•2.0 | üöß Future |  
| **PurchaseLevel3Action** | 3 | 0.0 | ‚â•3.0 | üöß Future |
| **SelfDevelopmentAction** | 1 | 0.0 | No limit | üöß Future |

**Processing**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π ‚Üí –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≥–µ–Ω—Ç–∞

### SYSTEM Events (Priority 5)
**Category**: System  
**Description**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é  

| Event | Frequency | Description | Implementation |
|-------|-----------|-------------|----------------|
| **EnergyRecoveryEvent** | 24h | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤ | Direct method call |
| **DailyResetEvent** | 24h | –°–±—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—é–¥–∂–µ—Ç–æ–≤ | Direct method call |
| **SaveDailyTrend** | 24h | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ | Direct method call |
| **ArchiveInactiveTrends** | 24h | –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤ (3+ –¥–Ω—è) | Direct method call |

## Event Processing Flow

1. **Generation**: –°–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≥–µ–Ω—Ç–∞–º–∏ –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
2. **Queueing**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ—á–µ—Ä–µ–¥—å —Å timestamp
3. **Priority Sorting**: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ priority ‚Üí timestamp  
4. **Processing**: SimulationEngine.process_event() –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ —Ç–∏–ø—É
5. **State Update**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è batch-commit
6. **Persistence**: Batch-commit –∫–∞–∂–¥—ã–µ 100 –æ–ø–µ—Ä–∞—Ü–∏–π –∏–ª–∏ 1 –º–∏–Ω—É—Ç—É

## Event Rate Limiting

- **Max queue size**: 1000 —Å–æ–±—ã—Ç–∏–π
- **Agent event rate**: –¥–æ 43 —Å–æ–±—ã—Ç–∏–π –Ω–∞ –∞–≥–µ–Ω—Ç–∞ –≤ –¥–µ–Ω—å  
- **Base frequency**: —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å Œª = 43*1000/24/60/60 ‚âà 0.49 events/sec/agent
- **Modifiers**: energy_level –∏ time_budget –≤–ª–∏—è—é—Ç –Ω–∞ —á–∞—Å—Ç–æ—Ç—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## Performance Targets

- **P95 latency**: < 10ms –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
- **Throughput**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 1000 –∞–≥–µ–Ω—Ç–æ–≤ √ó 43 —Å–æ–±—ã—Ç–∏—è/–¥–µ–Ω—å = 43000 —Å–æ–±—ã—Ç–∏–π/–¥–µ–Ω—å
- **Queue overflow**: graceful degradation –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ 5000 —Å–æ–±—ã—Ç–∏–π
- **Batch commit**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π commit –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ 